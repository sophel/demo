<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=2.0,width=device-width;"/>
		<title></title>
	</head>
	<script type="text/javascript" src="../../js/jquery.min.js" ></script>
	<body>
		<div>
			<label>x:</label><span id="x"></span>
			<label>y:</label><span id="y"></span>
			<label>z:</label><span id="z"></span>
		</div>
	</body>
	<script>
		$(document).ready(function(){
			alert('页面加载了');
			var state = window.history.state;
			console.log( state );
			//1.解析URI要用decodeURI方法
			var crt_loc = decodeURI(window.location.href,'utf-8');
			//2.查询获取参数字符串
			var index = crt_loc.indexOf('?');
			var para_str = crt_loc.substring( index+1 );
			//3.将参数字符串转化成对象
			para_str = para_str.split('=')[1];
			var para_obj = JSON.parse(para_str);
			for( var item in para_obj ){
				$("#"+item).html( para_obj[item] );
			}
			window.history.replaceState(para_obj,'','');
			window.onunload = function(){
				alert("页面要卸载了");
			}
			//不执行，popstate只对同一个doc起作用
//			window.addEventListener('popstate',function(e){
//				alert('ok2');
//			});
		});
	</script>
</html>
